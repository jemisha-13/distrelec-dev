/* jquery SelectBoxIt - v3.3.0 - 2013-3-19
* http://www.gregfranko.com/jQuery.selectBoxIt.js/
* Copyright (c) 2012 Greg Franko; Licensed MIT */

(function(e){"use strict";e(window.jQuery,window,document)})(function(e,t,n,r){"use strict";e.widget("selectBox.selectBoxIt",{VERSION:"3.3.0",options:{showEffect:"none",showEffectOptions:{},showEffectSpeed:"medium",hideEffect:"none",hideEffectOptions:{},hideEffectSpeed:"medium",showFirstOption:true,defaultText:"",defaultIcon:"",downArrowIcon:"",theme:"default",keydownOpen:true,isMobile:function(){var e=navigator.userAgent||navigator.vendor||t.opera;return/iPhone|iPod|iPad|Android|BlackBerry|Opera Mini|IEMobile/.test(e)},"native":false,aggressiveChange:false,selectWhenHidden:true,viewport:e(t),similarSearch:false,copyAttributes:["title","rel"],copyClasses:"button",nativeMousedown:false,customShowHideEvent:false,autoWidth:true,html:true},getThemes:function(){var t=this,n=e(t.element).attr("data-theme")||"c";return{bootstrap:{focus:"active",hover:"",disabled:"disabled",arrow:"caret",button:"btn",list:"dropdown-menu",container:"bootstrap",open:"open"},jqueryui:{focus:"ui-state-focus",hover:"ui-state-hover",disabled:"ui-state-disabled",arrow:"ui-icon ui-icon-triangle-1-s",button:"ui-widget ui-state-default",list:"ui-widget ui-widget-content",container:"jqueryui",open:"selectboxit-open"},jquerymobile:{focus:"ui-btn-down-"+n,hover:"ui-btn-hover-"+n,disabled:"ui-disabled",arrow:"ui-icon ui-icon-arrow-d ui-icon-shadow",button:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+n,list:"ui-btn ui-btn-icon-right ui-btn-corner-all ui-shadow ui-btn-up-"+n,container:"jquerymobile",open:"selectboxit-open"},"default":{focus:"selectboxit-focus",hover:"selectboxit-hover",disabled:"selectboxit-disabled",arrow:"selectboxit-default-arrow",button:"selectboxit-btn",list:"selectboxit-list",container:"selectboxit-container",open:"selectboxit-open"}}},_create:function(){var t=this;if(!t.element.is("select")){return}t.element.hide();t.originalElem=t.element[0];t.selectBox=t.element;t.selectItems=t.element.find("option");t.firstSelectItem=t.selectItems.slice(0,1);t.documentHeight=e(n).height();t.theme=t.getThemes()[t.options["theme"]]||t.getThemes()["default"];t.currentFocus=0;t.blur=true;t.textArray=[];t.currentIndex=0;t.currentText="";t.flipped=false;t._createDropdownButton()._createUnorderedList()._copyAttributes()._replaceSelectBox()._addClasses(t.theme)._eventHandlers();if(t.originalElem.disabled&&t.disable){t.disable()}if(t._ariaAccessibility){t._ariaAccessibility()}if(t._mobile){t._mobile()}if(t.options["native"]){this._applyNativeSelect()}t.triggerEvent("create");return t},_createDropdownButton:function(){var t=this,n=t.originalElem.id||"",r=t.options["copyClasses"],i=t.selectBox.attr("class")||"";t.dropdownText=e("<span/>",{id:n&&n+"SelectBoxItText","class":"selectboxit-text",unselectable:"on",text:t.firstSelectItem.text()}).attr("data-val",t.originalElem.value);t.dropdownImageContainer=e("<span/>",{"class":"selectboxit-option-icon-container"});t.dropdownImage=e("<i/>",{id:n&&n+"SelectBoxItDefaultIcon","class":"selectboxit-default-icon",unselectable:"on"});t.dropdown=e("<span/>",{id:n&&n+"SelectBoxIt","class":"selectboxit "+(r==="button"?i:""),name:t.originalElem.name,tabindex:t.selectBox.attr("tabindex")||"0",unselectable:"on"}).append(t.dropdownImageContainer.append(t.dropdownImage)).append(t.dropdownText);t.dropdownContainer=e("<span/>",{id:n&&n+"SelectBoxItContainer","class":"selectboxit-container "+(r==="container"?i:"")}).append(t.dropdown);return t},_createUnorderedList:function(){var t=this,n,r,i,s,o,u,a,f="",l=t.originalElem.id||"",c=e("<ul/>",{id:l&&l+"SelectBoxItOptions","class":"selectboxit-options",tabindex:-1}),h,p;if(!t.options["showFirstOption"]){t.selectItems=t.selectBox.find("option").slice(1)}t.selectItems.each(function(l){r="";i="";n=e(this).prop("disabled");s=e(this).data("icon")||"";o=e(this).data("iconurl")||"";u=o?"selectboxit-option-icon-url":"";a=o?"style=\"background-image:url('"+o+"');\"":"",h=e(this).attr("data-text"),p=h?h:e(this).text();if(e(this).parent().is("optgroup")){r="selectboxit-optgroup-option";if(e(this).index()===0){i='<span class="selectboxit-optgroup-header" data-disabled="true">'+e(this).parent().first().attr("label")+"</span>"}}f+=i+'<li id="'+l+'" data-val="'+this.value+'" data-disabled="'+n+'" class="'+r+" selectboxit-option "+(e(this).attr("class")||"")+'"><a class="selectboxit-option-anchor"><span class="selectboxit-option-icon-container"><i class="selectboxit-option-icon '+s+" "+(u||t.theme["container"])+'"'+a+"></i></span>"+(t.options["html"]?p:t.htmlEscape(p))+"</a></li>";t.textArray[l]=n?"":p;if(this.selected){t._setText(t.dropdownText,p);t.currentFocus=l}});if((t.options["defaultText"]||t.selectBox.data("text"))&&!t.selectBox.find("option[selected]").length){var d=t.options["defaultText"]||t.selectBox.data("text");t._setText(t.dropdownText,d);t.options["defaultText"]=d}c.append(f);t.list=c;t.dropdownContainer.append(t.list);t.listItems=t.list.find("li");t.listItems.first().addClass("selectboxit-option-first");t.listItems.last().addClass("selectboxit-option-last");t.list.find("li[data-disabled='true']").not(".optgroupHeader").addClass(t.theme["disabled"]);t.dropdownImage.addClass(t.selectBox.data("icon")||t.options["defaultIcon"]||t.listItems.eq(t.currentFocus).find("i").attr("class"));t.dropdownImage.attr("style",t.listItems.eq(t.currentFocus).find("i").attr("style"));return t},_replaceSelectBox:function(){var t=this,n,r=t.originalElem.id||"";t.selectBox.css("display","none").after(t.dropdownContainer);n=t.dropdown.height();t.downArrow=e("<i/>",{id:r&&r+"SelectBoxItArrow","class":"selectboxit-arrow",unselectable:"on"});t.downArrowContainer=e("<span/>",{id:r&&r+"SelectBoxItArrowContainer","class":"selectboxit-arrow-container",unselectable:"on"}).append(t.downArrow);t.dropdown.append(t.downArrowContainer);t.listItems.removeClass("selectboxit-selected").eq(t.currentFocus).addClass("selectboxit-selected");if(!t.dropdownImageContainer.width()){t.dropdownImageContainer.remove()}if(t.options["autoWidth"]){t.dropdown.css({width:"auto"}).css({width:t.list.outerWidth(true)+t.downArrowContainer.outerWidth(true)+t.dropdownImage.outerWidth(true)})}t.dropdownText.css({"max-width":t.dropdownContainer.width()-(t.downArrowContainer.outerWidth(true)+t.dropdownImage.outerWidth(true))});return t},_scrollToView:function(e){var t=this,n=t.listItems.eq(t.currentFocus),r=t.list.scrollTop(),i=n.height(),s=n.position().top,o=Math.abs(s),u=t.list.height(),a;if(e==="search"){if(u-s<i){t.list.scrollTop(r+(s-(u-i)))}else if(s<-1){t.list.scrollTop(s-i)}}else if(e==="up"){if(s<-1){t.list.scrollTop(r-o)}}else if(e==="down"){if(u-s<i){t.list.scrollTop(r+(o-u+i))}}return t},_callbackSupport:function(t){var n=this;if(e.isFunction(t)){t.call(n,n.dropdown)}return n},_setText:function(e,t){var n=this;if(n.options["html"]){e.html(t)}else{e.text(t)}return n},open:function(e){var t=this,n=t.options["showEffect"],r=t.options["showEffectSpeed"],i=t.options["showEffectOptions"],s=t.options["native"],o=t.options["isMobile"]();if(!t.listItems.length){return t}if(!s&&!o&&!this.list.is(":visible")){t.triggerEvent("open");if(t._dynamicPositioning){t._dynamicPositioning()}if(n==="none"){t.list.show()}else if(n==="show"){t.list.show(r)}else if(n==="slideDown"){t.list.slideDown(r)}else if(n==="fadeIn"){t.list.fadeIn(r)}else{t.list.show(n,i,r)}t.list.promise().done(function(){t._scrollToView("search")})}t._callbackSupport(e);return t},close:function(e){var t=this,n=t.options["hideEffect"],r=t.options["hideEffectSpeed"],i=t.options["hideEffectOptions"],s=t.options["native"],o=t.options["isMobile"]();if(!s&&!o&&this.list.is(":visible")){t.triggerEvent("close");if(n==="none"){t.list.hide()}else if(n==="hide"){t.list.hide(r)}else if(n==="slideUp"){t.list.slideUp(r)}else if(n==="fadeOut"){t.list.fadeOut(r)}else{t.list.hide(n,i,r)}}t._callbackSupport(e);return t},toggle:function(){var e=this,t=e.list.is(":visible");if(t){e.close()}else if(!t){e.open()}},_keyMappings:{38:"up",40:"down",13:"enter",8:"backspace",9:"tab",32:"space",27:"esc"},_keydownMethods:function(){var e=this,t=e.list.is(":visible")||!e.options["keydownOpen"];return{down:function(){if(e.moveDown&&t){e.moveDown()}},up:function(){if(e.moveUp&&t){e.moveUp()}},enter:function(){var t=e.list.find("li."+e.focusClass);if(!t.length){t=e.listItems.first()}e._update(t);if(e.list.is(":visible")){e.close()}e.triggerEvent("enter")},tab:function(){e.triggerEvent("tab-blur");e.close()},backspace:function(){e.triggerEvent("backspace")},esc:function(){e.close()}}},_eventHandlers:function(){var t=this,n=t.options["nativeMousedown"],r=t.options["customShowHideEvent"],i,s;this.dropdown.bind({"click.selectBoxIt":function(){t.dropdown.trigger("focus",true);if(!t.originalElem.disabled){t.triggerEvent("click");if(!n&&!r){t.toggle()}}},"mousedown.selectBoxIt":function(){e(this).data("mdown",true);t.triggerEvent("mousedown");if(n&&!r){t.toggle()}},"mouseup.selectBoxIt":function(){t.triggerEvent("mouseup")},"blur.selectBoxIt":function(){if(t.blur){t.triggerEvent("blur");if(t.list.is(":visible")){t.close()}}},"focus.selectBoxIt":function(n,r){var i=e(this).data("mdown");e(this).removeData("mdown");if(!i&&!r){setTimeout(function(){t.triggerEvent("tab-focus")},0)}if(!r){t.triggerEvent("focus")}},"keydown.selectBoxIt":function(e){var n=t._keyMappings[e.keyCode],r=t._keydownMethods()[n];if(r){r();if(t.options["keydownOpen"]&&(n==="up"||n==="down")){t.open()}}if(r&&n!=="tab"){e.preventDefault()}},"keypress.selectBoxIt":function(e){var n=e.charCode||e.keyCode,r=String.fromCharCode(n);if(t.search){t.search(r,true,true)}if(n===32){e.preventDefault()}},"mouseenter.selectBoxIt":function(){t.triggerEvent("mouseenter")},"mouseleave.selectBoxIt":function(){t.triggerEvent("mouseleave")}});t.list.bind({"mouseover.selectBoxIt":function(){t.blur=false},"mouseout.selectBoxIt":function(){t.blur=true},"focusin.selectBoxIt":function(){t.dropdown.trigger("focus",true)}}).delegate("li","click.selectBoxIt",function(){t._update(e(this));t.triggerEvent("option-click");if(e(this).attr("data-disabled")==="false"){t.close()}}).delegate("li","focusin.selectBoxIt",function(){t.listItems.not(e(this)).removeAttr("data-active");e(this).attr("data-active","");var n=t.list.is(":hidden");if(t.options["searchWhenHidden"]&&n||t.options["aggressiveChange"]||n&&t.options["selectWhenHidden"]){t._update(e(this))}}).delegate("li","mouseup.selectBoxIt",function(){if(n&&!r){t._update(e(this));t.triggerEvent("option-mouseup");if(e(this).attr("data-disabled")==="false"){t.close()}}});t.selectBox.bind({"change.selectBoxIt, internal-change.selectBoxIt":function(e,n){var r;if(!n){r=t.list.find('li[data-val="'+t.originalElem.value+'"]');if(r.length){t.listItems.eq(t.currentFocus).removeClass(t.focusClass);t.currentFocus=+r.attr("id")}}r=t.listItems.eq(t.currentFocus);i=r.attr("data-text");s=i?i:r.find("a").text();t._setText(t.dropdownText,s);t.dropdownText.attr("data-val",t.originalElem.value);if(r.find("i").attr("class")){t.dropdownImage.attr("class",r.find("i").attr("class")).addClass("selectboxit-default-icon");t.dropdownImage.attr("style",r.find("i").attr("style"))}t.triggerEvent("changed")},"disable.selectBoxIt":function(){t.dropdown.addClass(t.theme["disabled"])},"enable.selectBoxIt":function(){t.dropdown.removeClass(t.theme["disabled"])}});return t},_update:function(e){var t=this,n,r,i=t.options["defaultText"]||t.selectBox.attr("data-text");if(e.attr("data-disabled")==="false"){n=t.listItems.eq(t.currentFocus).attr("data-text");r=n?n:t.listItems.eq(t.currentFocus).text();if((i&&t.options["html"]?t.dropdownText.html()===i:t.dropdownText.text()===i)&&t.selectBox.val()===e.attr("data-val")){t._setText(t.dropdownText,r);t.dropdownText.trigger("internal-change")}else{t.selectBox.val(e.attr("data-val"));t.currentFocus=+e.attr("id");if(t.originalElem.value!==t.dropdownText.attr("data-val")){t.triggerEvent("change")}}}},_addClasses:function(t){var n=this,r=t.focus,i=t.hover,s=t.button,o=t.list,u=t.arrow,a=t.container,f=t.open;n.focusClass=r;n.openClass=f;n.selectedClass="selectboxit-selected";n.downArrow.addClass(n.selectBox.data("downarrow")||n.options["downArrowIcon"]||u);n.dropdownContainer.addClass(a);n.dropdown.addClass(s);n.list.addClass(o);n.listItems.bind({"focusin.selectBoxIt":function(){e(this).addClass(r)},"blur.selectBoxIt":function(){e(this).removeClass(r)}});n.selectBox.bind({"open.selectBoxIt":function(){var e=n.list.find("li[data-val='"+n.dropdownText.attr("data-val")+"']"),t;if(!e.length){if(n.currentFocus===0&&!n.options["showFirstOption"]&&n.listItems.eq(0).hasClass(n.theme["disabled"])){e=n.listItems.not("[data-disabled=true]").first()}else{e=n.listItems.first()}}n.currentFocus=+e.attr("id");t=n.listItems.eq(n.currentFocus);n.dropdown.addClass(f);n.dropdown.removeClass(i).addClass(r);n.listItems.removeClass(n.selectedClass);n.listItems.removeAttr("data-active").not(t).removeClass(r);t.addClass(r).addClass(n.selectedClass)},"close.selectBoxIt":function(){n.dropdown.removeClass(f)},"blur.selectBoxIt":function(){n.dropdown.removeClass(r)},"mouseenter.selectBoxIt":function(){n.dropdown.addClass(i)},"mouseleave.selectBoxIt":function(){n.dropdown.removeClass(i)}});n.listItems.bind({"mouseenter.selectBoxIt":function(){if(e(this).attr("data-disabled")==="false"){n.listItems.removeAttr("data-active");e(this).addClass(r).attr("data-active","");n.listItems.not(e(this)).removeClass(r);e(this).addClass(r);n.currentFocus=+e(this).attr("id")}},"mouseleave.selectBoxIt":function(){if(e(this).attr("data-disabled")==="false"){n.listItems.not(e(this)).removeClass(r).removeAttr("data-active");e(this).addClass(r);n.currentFocus=+e(this).attr("id")}}});return n},refresh:function(e){var t=this;if(t._destroySelectBoxIt){t._destroySelectBoxIt()._create(true)._callbackSupport(e);t.triggerEvent("refresh")}return t},htmlEscape:function(e){return String(e).replace(/&/g,"&").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},triggerEvent:function(e){var t=this,n=t.options["showFirstOption"]?t.currentFocus:t.currentFocus-1>=0?t.currentFocus:0;t.selectBox.trigger(e,{elem:t.selectBox.eq(n),"dropdown-elem":t.listItems.eq(t.currentFocus)});return t},_copyAttributes:function(){var e=this;if(e._addSelectBoxAttributes){e._addSelectBoxAttributes()}return e}});var i=e.selectBox.selectBoxIt.prototype;i._ariaAccessibility=function(){var t=this;t.dropdown.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":t.list.attr("id"),"aria-activedescendant":t.listItems.eq(t.currentFocus).attr("id"),"aria-label":e("label[for='"+t.originalElem.id+"']").text()||"","aria-live":"assertive"}).bind({"disable.selectBoxIt":function(){t.dropdown.attr("aria-disabled","true")},"enable.selectBoxIt":function(){t.dropdown.attr("aria-disabled","false")}});t.list.attr({role:"listbox","aria-hidden":"true"});t.listItems.attr({role:"option"});t.selectBox.bind({"change.selectBoxIt":function(){t.dropdownText.attr("aria-label",t.originalElem.value)},"open.selectBoxIt":function(){t.list.attr("aria-hidden","false");t.dropdown.attr("aria-expanded","true")},"close.selectBoxIt":function(){t.list.attr("aria-hidden","true");t.dropdown.attr("aria-expanded","false")}});return t};i._addSelectBoxAttributes=function(){var t=this;t._addAttributes(t.selectBox.prop("attributes"),t.dropdown);t.selectItems.each(function(n){t._addAttributes(e(this).prop("attributes"),t.listItems.eq(n))});return t};e.selectBox.selectBoxIt.prototype._addAttributes=function(t,n){var r=this,i=r.options["copyAttributes"];if(t.length){e.each(t,function(t,r){var s=r.name.toLowerCase(),o=r.value;if(o!=="null"&&(e.inArray(s,i)!==-1||s.indexOf("data")!==-1)){n.attr(s,o)}})}return r};i.destroy=function(t){var n=this;n._destroySelectBoxIt();e.Widget.prototype.destroy.call(n);n._callbackSupport(t);return n};i._destroySelectBoxIt=function(){var t=this;t.dropdown.unbind(".selectBoxIt").undelegate(".selectBoxIt");if(e.contains(t.dropdownContainer[0],t.originalElem)){t.dropdownContainer.before(t.selectBox)}t.dropdownContainer.remove();t.selectBox.removeAttr("style").show();t.triggerEvent("destroy");return t};i.disable=function(t){var n=this;if(!n.options["disabled"]){n.close();n.selectBox.attr("disabled","disabled");n.dropdown.removeAttr("tabindex").addClass("selectboxit-disabled");e.Widget.prototype.disable.call(n);n.triggerEvent("disable")}n._callbackSupport(t);return n};i.disableOption=function(e,t){var n=this,r,i,s;if((typeof e).toLowerCase()==="number"){n.close();r=n.selectBox.find("option").eq(e);n.triggerEvent("disable-option");r.attr("disabled","disabled");n.listItems.eq(e).attr("data-disabled","true").addClass(n.theme["disabled"]);if(n.currentFocus===e){i=n.listItems.eq(n.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;s=n.listItems.eq(n.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(i){n.moveDown()}else if(s){n.moveUp()}else{n.disable()}}}n._callbackSupport(t);return n};i._isDisabled=function(e){var t=this;if(t.originalElem.disabled){t.disable()}return t};i._dynamicPositioning=function(){var t=this,n=t.dropdown.offset().top,r=t.list.data("max-height")||t.list.outerHeight(),i=t.dropdown.outerHeight(),s=t.options["viewport"],o=s.height(),u=e.isWindow(s.get(0))?s.scrollTop():s.offset().top,a=n+i+r<=o+u,f=!a;if(!t.list.data("max-height")){t.list.data("max-height",t.list.outerHeight())}if(!f){t.list.css("max-height",r);t.list.css("top","auto")}else if(t.dropdown.offset().top-u>=r){t.list.css("max-height",r);t.list.css("top",t.dropdown.position().top-t.list.outerHeight())}else{var l=Math.abs(n+i+r-(o+u)),c=Math.abs(t.dropdown.offset().top-u-r);if(l<c){t.list.css("max-height",r-l-i/2);t.list.css("top","auto")}else{t.list.css("max-height",r-c-i/2);t.list.css("top",t.dropdown.position().top-t.list.outerHeight())}}return t};i.enable=function(t){var n=this;if(n.options["disabled"]){n.triggerEvent("enable");n.selectBox.removeAttr("disabled");n.dropdown.attr("tabindex",0).removeClass(n.disabledClasses);e.Widget.prototype.enable.call(n);n._callbackSupport(t)}return n};i.enableOption=function(e,t){var n=this,r,i=0,s,o;if((typeof e).toLowerCase()==="number"){r=n.selectBox.find("option").eq(e);n.triggerEvent("enable-option");r.removeAttr("disabled");n.listItems.eq(e).attr("data-disabled","false").removeClass(n.disabledClasses)}n._callbackSupport(t);return n};i.moveDown=function(e){var t=this;t.currentFocus+=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?true:false,r=t.listItems.eq(t.currentFocus).nextAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===t.listItems.length){t.currentFocus-=1}else if(n&&r){t.listItems.eq(t.currentFocus-1).blur();t.moveDown();return}else if(n&&!r){t.currentFocus-=1}else{t.listItems.eq(t.currentFocus-1).blur().end().eq(t.currentFocus).focusin();t._scrollToView("down");t.triggerEvent("moveDown")}t._callbackSupport(e);return t};i.moveUp=function(e){var t=this;t.currentFocus-=1;var n=t.listItems.eq(t.currentFocus).attr("data-disabled")==="true"?true:false,r=t.listItems.eq(t.currentFocus).prevAll("li").not("[data-disabled='true']").first().length;if(t.currentFocus===-1){t.currentFocus+=1}else if(n&&r){t.listItems.eq(t.currentFocus+1).blur();t.moveUp();return}else if(n&&!r){t.currentFocus+=1}else{t.listItems.eq(this.currentFocus+1).blur().end().eq(t.currentFocus).focusin();t._scrollToView("up");t.triggerEvent("moveUp")}t._callbackSupport(e);return t};i._setCurrentSearchOption=function(e){var t=this;if((t.options["aggressiveChange"]||t.options["selectWhenHidden"]||t.listItems.eq(e).is(":visible"))&&t.listItems.eq(e).data("disabled")!==true){t.listItems.eq(t.currentFocus).blur();t.currentIndex=e;t.currentFocus=e;t.listItems.eq(t.currentFocus).focusin();t._scrollToView("search");t.triggerEvent("search")}return t};i._searchAlgorithm=function(e,t){var n=this,r=false,i,s,o,u,a=n.textArray,f=n.currentText;for(i=e,o=a.length;i<o;i+=1){u=a[i];for(s=0;s<o;s+=1){if(a[s].search(t)!==-1){r=true;s=o}}if(!r){n.currentText=n.currentText.charAt(n.currentText.length-1).replace(/[|()\[{.+*?$\\]/g,"\\$0");f=n.currentText}t=new RegExp(f,"gi");if(f.length<3){t=new RegExp(f.charAt(0),"gi");if(u.charAt(0).search(t)!==-1){n._setCurrentSearchOption(i);if(u.substring(0,f.length).toLowerCase()!==f.toLowerCase()||n.options["similarSearch"]){n.currentIndex+=1}return false}}else{if(u.search(t)!==-1){n._setCurrentSearchOption(i);return false}}if(u.toLowerCase()===n.currentText.toLowerCase()){n._setCurrentSearchOption(i);n.currentText="";return false}}return true};i.search=function(e,t,n){var r=this;if(n){r.currentText+=e.replace(/[|()\[{.+*?$\\]/g,"\\$0")}else{r.currentText=e.replace(/[|()\[{.+*?$\\]/g,"\\$0")}var i=r._searchAlgorithm(r.currentIndex,new RegExp(r.currentText,"gi"));if(i){r._searchAlgorithm(0,r.currentText)}r._callbackSupport(t);return r};i._applyNativeSelect=function(){var e=this,t,n,r;e.dropdownContainer.append(e.selectBox);e.selectBox.css({display:"block",width:e.dropdown.outerWidth(),height:e.dropdown.outerHeight(),opacity:"0",position:"absolute",top:"0",left:"0",cursor:"pointer","z-index":"999999",margin:e.dropdown.css("margin"),padding:"0","-webkit-appearance":"menulist-button"}).bind({"changed.selectBoxIt":function(){t=e.selectBox.find("option").filter(":selected");n=t.attr("data-text");r=n?n:t.text();e._setText(e.dropdownText,r);if(e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")){e.dropdownImage.attr("class",e.list.find('li[data-val="'+t.val()+'"]').find("i").attr("class")).addClass("selectboxit-default-icon")}}})};i._mobile=function(e){var t=this;if(t.options["isMobile"]()){t._applyNativeSelect()}return this};i.selectOption=function(e,t){var n=this;if((typeof e).toLowerCase()==="number"){n.selectBox.val(n.selectBox.find("option").eq(e).val()).change()}else if((typeof e).toLowerCase()==="string"){n.selectBox.val(e).change()}n._callbackSupport(t);return n};i.setOption=function(t,n,r){var i=this,s=i.listItems.eq(0);if(t==="showFirstOption"&&!n){s.hide()}else if(t==="showFirstOption"&&n){s.show()}else if(t==="defaultIcon"&&n){i.dropdownImage.attr("class",n+" selectboxit-arrow")}else if(t==="downArrowIcon"&&n){i.downArrow.attr("class",n+" selectboxit-arrow")}else if(t==="defaultText"){i._setText(i.dropdownText,n)}e.Widget.prototype._setOption.apply(i,arguments);i._callbackSupport(r);return i};i.setOptions=function(t,n){var r=this,i=r.listItems.eq(0);e.Widget.prototype._setOptions.apply(r,arguments);if(r.options["showFirstOption"]){i.show()}else{i.hide()}if(r.options["defaultIcon"]){r.dropdownImage.attr("class",r.options["defaultIcon"]+" selectboxit-arrow")}if(r.options["downArrowIcon"]){r.downArrow.attr("class",r.options["downArrowIcon"]+" selectboxit-arrow")}if(r.options["defaultText"]){r._setText(r.dropdownText,r.options["defaultText"])}r._callbackSupport(n);return r};i.wait=function(e,t){var n=this,r=this.returnTimeout(e);r.then(function(){n._callbackSupport(t)});return n};i.returnTimeout=function(t){return e.Deferred(function(e){setTimeout(e.resolve,t)})}})