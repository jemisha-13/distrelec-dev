!function(t){t.fn.editable=function(e){return"disable"==e?this.unbind(this.data("editable.options").editBy,this.data("editable.options").toEditable):"enable"==e?this.bind(this.data("editable.options").editBy,this.data("editable.options").toEditable):"destroy"==e?this.unbind(this.data("editable.options").editBy,this.data("editable.options").toEditable).data("editable.previous",null).data("editable.current",null).data("editable.options",null):((e=t.extend({onEdit:null,onSubmit:null,onCancel:null,editClass:null,submit:null,cancel:null,type:"text",submitBy:"blur",editBy:"click",options:null},e)).toEditable=function(){$this=t(this),$this.data("editable.current",$this.html()),opts=$this.data("editable.options"),$this.empty(),$this.data("editable.previous",$this.data("editable.current")).children().focus().addClass(opts.editClass),opts.submit?t("<button/>").appendTo($this).html(opts.submit).addClass("btn").addClass("btn-primary").one("mousedown",function(){opts.saveButtonMouseDownHappened=!0}).one("mouseup",function(){opts.toNonEditable(t(this).parent(),!0)}):$this.one(opts.submitBy,function(){opts.toNonEditable(t(this),!0)}).children().one(opts.submitBy,function(){opts.toNonEditable(t(this).parent(),!0)}),opts.cancel&&t("<button/>").appendTo($this).html(opts.cancel).one("mouseup",function(){opts.toNonEditable(t(this).parent(),!1)}),t.isFunction(opts.onEdit)&&opts.onEdit.apply($this,[{current:$this.data("editable.current"),previous:$this.data("editable.previous")}]),t.editableFactory[opts.type].toEditable($this,opts),$this.find(".input-field").focus()},e.toNonEditable=function(e,a){opts=e.data("editable.options"),e.one(opts.editBy,opts.toEditable).data("editable.current",a?t.editableFactory[opts.type].getValue(e,opts):e.data("editable.current")).html("password"==opts.type?"*****":e.data("editable.current"));var i=null;t.isFunction(opts.onSubmit)&&1==a?i=opts.onSubmit:t.isFunction(opts.onCancel)&&0==a&&(i=opts.onCancel),null!=i&&i.apply(e,[{current:e.data("editable.current"),previous:e.data("editable.previous"),listNameTag:e}])},this.data("editable.options",e),this.one(e.editBy,e.toEditable))},t.editableFactory={text:{toEditable:function(e,a){var i=t("<div/>").appendTo(e).addClass("input-wrapper");t("<input/>").appendTo(i).addClass("input-field").attr("type","text").one("blur",function(){opts.saveButtonMouseDownHappened||opts.toNonEditable(e,!1)}).val(e.data("editable.current"))},getValue:function(t,e){return t.find(".input-field").val()}},password:{toEditable:function(e,a){e.data("editable.current",e.data("editable.password")),e.data("editable.previous",e.data("editable.password")),t('<input type="password"/>').appendTo(e).val(e.data("editable.current"))},getValue:function(t,e){return t.data("editable.password",t.children().val()),t.children().val()}},textarea:{toEditable:function(e,a){t("<textarea/>").appendTo(e).val(e.data("editable.current"))},getValue:function(t,e){return t.children().val()}},select:{toEditable:function(e,a){$select=t("<select/>").appendTo(e),t.each(a.options,function(e,a){t("<option/>").appendTo($select).html(a).attr("value",e)}),$select.children().each(function(){var a=t(this);if(a.text()==e.data("editable.current"))return a.attr("selected","selected").text()})},getValue:function(e,a){var i=null;return t("select",e).children().each(function(){if(t(this).attr("selected"))return i=t(this).text()}),i}}}}(jQuery);