var Tc=Tc||{};Tc.$=$,function(){var t=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(e){var o=this.prototype;t=!0;var i=new this;for(var r in t=!1,e)i[r]="function"==typeof e[r]&&"function"==typeof o[r]&&n.test(e[r])?function(t,n){return function(){var e=this._super;this._super=o[t];var i=n.apply(this,arguments);return this._super=e,i}}(r,e[r]):e[r];function s(){!t&&this.init&&this.init.apply(this,arguments)}return s.prototype=i,s.constructor=s,s.extend=arguments.callee,s}}(),Tc.Config={dependencies:{css:"/css/dependencies",js:"/js/dependencies"}},function(t){"use strict";Tc.Application=Class.extend({init:function(n,e){this.config=t.extend(Tc.Config,e),this.$ctx=n||t("body"),this.modules=[],this.connectors={},this.sandbox=new Tc.Sandbox(this,this.config)},registerModules:function(n){var e=this,o=[],i=Tc.Utils.String;return(n=n||this.$ctx).find('.mod:not([data-ignore="true"])').each(function(){var n=t(this),r=n.attr("class").split(" ");if(r.length>1){for(var s,c,u=[],a=[],f=0,h=r.length;f<h;f++){var l=t.trim(r[f]);l&&(l.indexOf("-")>-1&&(l=i.toCamel(l)),0===l.indexOf("mod")&&l.length>3?s=l.substr(3):0===l.indexOf("skin")&&u.push(l.substr(4).replace(s,"")))}if(c=n.attr("data-connectors"))for(f=0,h=(a=c.split(",")).length;f<h;f++){var d=t.trim(a[f]);d&&(a[f]=d)}s&&Tc.Module[s]&&o.push(e.registerModule(n,s,u,a))}}),o},unregisterModules:function(n){var e=this.connectors;if((n=n||this.modules)===this.modules)this.connectors=[],this.modules=[];else for(var o=0,i=n.length;o<i;o++){var r,s=n[o];for(var c in e)e.hasOwnProperty(c)&&e[c].unregisterComponent(s);(r=t.inArray(s,this.modules))>-1&&delete this.modules[r]}},start:function(t){for(var n=0,e=(t=t||this.modules).length;n<e;n++)t[n].start()},stop:function(t){for(var n=0,e=(t=t||this.modules).length;n<e;n++)t[n].stop()},registerModule:function(t,n,e,o){var i=this.modules;if(e=e||[],o=o||[],(n=n||void 0)&&Tc.Module[n]){var r=i.length;t.data("id",r),i[r]=new Tc.Module[n](t,this.sandbox,r);for(var s=0,c=e.length;s<c;s++){var u=e[s];Tc.Module[n][u]&&(i[r]=i[r].getDecoratedModule(n,u))}for(s=0,c=o.length;s<c;s++)this.registerConnection(o[s],i[r]);return i[r]}return null},registerConnection:function(n,e){var o,i,r,s=(n=t.trim(n)).split("-");if(1===s.length?r=i=s[0]:2===s.length&&(r=(o=s[0])+(i=s[1])),r){var c=this.connectors;c[r]||(o?Tc.Connector[o]&&(c[r]=new Tc.Connector[o](i)):c[r]=new Tc.Connector(i)),c[r]&&(e.attachConnector(c[r]),c[r].registerComponent(e))}},unregisterConnection:function(t,n){var e=this.connectors[t];e&&(e.unregisterComponent(n),n.detachConnector(e))}})}(Tc.$),function(t){"use strict";Tc.Sandbox=Class.extend({init:function(t,n){this.application=t,this.config=n,this.afterCallbacks=[]},addModules:function(t){var n=[],e=this.application;return t&&(n=e.registerModules(t),e.start(n)),n},removeModules:function(t){var n=this.application;t&&(n.stop(t),n.unregisterModules(t))},subscribe:function(t,n){var e=this.application;n instanceof Tc.Module&&t&&(t+="",e.registerConnection(t,n))},unsubscribe:function(t,n){var e=this.application;n instanceof Tc.Module&&t&&(t+="",e.unregisterConnection(t,n))},getModuleById:function(t){var n=this.application;if(void 0!==n.modules[t])return n.modules[t];throw new Error("the module with the id "+t+" does not exist")},getConfig:function(){return this.config},getConfigParam:function(t){var n=this.config;if(void 0!==n[t])return n[t];throw new Error("the config param "+t+" does not exist")},ready:function(t){var n=this.afterCallbacks;if(n.push(t),this.application.modules.length===n.length)for(var e=0;e<n.length;e++){var o=n[e];"function"==typeof o&&(delete n[e],o())}}})}(Tc.$),function(t){"use strict";Tc.Module=Class.extend({init:function(t,n,e){this.$ctx=t,this.id=e,this.connectors={},this.sandbox=n},start:function(){var t=this;this.on&&this.on(function(){t.initAfter()})},stop:function(){var n=this.$ctx;t("*",n).unbind().removeData(),n.unbind().removeData()},initAfter:function(){var t=this;this.sandbox.ready(function(){t.after&&t.after()})},fire:function(n,e,o,i){var r=this.connectors,s=!0;null==o&&null==i?"function"==typeof e?(i=e,e=void 0):t.isArray(e)&&(o=e,e=void 0):null==i&&("function"==typeof o&&(i=o,o=void 0),t.isArray(e)&&(o=e,e=void 0)),n=Tc.Utils.String.capitalize(n),e=e||{};for(var c=0,u=(o=o||Object.keys(r)).length;c<u;c++){var a=o[c];if(!r.hasOwnProperty(a))throw new Error("the module #"+this.id+" is not connected to connector "+a);r[a].notify(this,"on"+n,e)||!1||(s=!1)}s&&"function"==typeof i&&i()},attachConnector:function(t){this.connectors[t.connectorId]=t},detachConnector:function(t){delete this.connectors[t.connectorId]},getDecoratedModule:function(t,n){if(Tc.Module[t][n]){var e=Tc.Module[t][n];return e.prototype=this,e.prototype.constructor=Tc.Module[t][n],new e(this)}return null}})}(Tc.$),function(t){"use strict";Tc.Connector=Class.extend({init:function(t){this.connectorId=t,this.components={}},registerComponent:function(t){this.components[t.id]={component:t}},unregisterComponent:function(t){var n=this.components;n[t.id]&&delete n[t.id]},notify:function(t,n,e,o){var i=!0,r=this.components;for(var s in r)if(r.hasOwnProperty(s)){var c=r[s].component;c!==t&&c[n]&&!1===c[n](e)&&(i=!1)}return i}})}(Tc.$),Tc.Utils={},Object.keys||(Object.keys=function(t){var n,e=[];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}),function(t){"use strict";Tc.Utils.String={capitalize:function(t){return t.substr(0,1).toUpperCase().concat(t.substr(1))},toCamel:function(t){return t.replace(/(\-[A-Za-z])/g,function(t){return t.toUpperCase().replace("-","")})}}}(Tc.$);